<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Dieselgate</title>
  <link rel="stylesheet" href="./assets/ol/ol.css">
  <link rel="stylesheet" href="./src/css/app.css">
</head>
<body>
  <div id="spinner-container">
    <div class="spinner">
      <div class="rect1"></div>
      <div class="rect2"></div>
      <div class="rect3"></div>
      <div class="rect4"></div>
      <div class="rect5"></div>
    </div>
  </div>
  <div id="map">
    <div id ="maptitle">Europe Dieselgate Death Toll - How Many People Get Killed Near You Every Year</div>
    <div class="select">
      <span class="arr"></span>
      <select id="changestyle">
        <option value="0">Top 100 regions with most premature deaths</option>
        <option value="1">Approximate premature deaths per region</option>
        <option value="2">Excess PM 2.5. concentration per region</option>
        <option value="3">Population per region</option>
      </select>
    </div>
    <div id="legend">
      <div id="class0" class="legendclass">
        <div id="textclass0"></div>
        <div id="fillclass0" class="legendfill"></div>
      </div>
      <div id="class1" class="legendclass">
        <div id="textclass1"></div>
        <div id="fillclass1" class="legendfill"></div>
      </div>
      <div id="class2" class="legendclass">
        <div id="textclass2"></div>
        <div id="fillclass2" class="legendfill"></div>
      </div>
      <div id="class3" class="legendclass">
        <div id="textclass3"></div>
        <div id="fillclass3" class="legendfill"></div>
      </div>
      <div id="class4" class="legendclass">
        <div id="textclass4"></div>
        <div id="fillclass4" class="legendfill"></div>
      </div>
      <div id="class5" class="legendclass">
        <div id="textclass5"></div>
        <div id="fillclass5" class="legendfill"></div>
      </div>
    </div>
    <div id="contributors">
      <div>
        Investigation by Stefano Valentino, <a target="_blank" href="http://www.mobilereporter.info"> MobileReporter</a>
      </div>
      <div>
        in partnership with the <a target="_blank" href="https://www.europeandatajournalism.eu/"> European Data Journalism Network</a>
      </div>
      <div>
        Map developed by  <a target="_blank" href="https://gis3w.it/"> Gis3W</a>
      </div>
      <div>
        Data from <a target="_blank" href="http://www.iiasa.ac.at/web/home/about/news/170918-diesel-nox.html"> IIASA and MetNorway study 2017</a>     </div>
      </div>
  </div>
  <div id="popup" class="ol-popup">
    <a href="#" id="popup-closer" class="ol-popup-closer"></a>
    <div id="popup-content"></div>
  </div>
  <script src="./assets/jquery/jquery-3.3.1.min.js"></script>
  <script src="./assets/ol/ol-debug.js"></script>
  <script src="./src/data/reticolo_dati.js"></script>
  <script src="./src/data/stati.js"></script>
  <script src="./src/js/layers_styles.js"></script>
  <script src="./src/js/legend.js"></script>
  <script src="./src/js/layers.js"></script>
  <script src="./src/js/map.js"></script>
  <script>
    var mapTitles = [
      "Extra PM 2.5 concentration from excess diesel NOx emissions - NB",
      "Extra PM 2.5 concentration from excess diesel NOx emissions",
      "Approximate premature deaths dues to excess diesel Nox emissions - NB",
      "Approximate premature deaths dues to excess diesel Nox emissions",
      "Popolation"
    ];
    $('#changestyle').change(function() {
      var value = $(this).find(":selected").val();
      change_reticolo_style(value);
      createLegend(value);
      overlay.setPosition(undefined);
      closer.blur();
    });
    createLegend(0);
  </script>
</body>
</html>
